<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ToDo List</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

<style>
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: url("164main.jpg") center/cover no-repeat;
  filter: blur(8px);
  z-index: -2;
}

html, body {
  height: 100%;
  margin: 0;
  font-family: 'Roboto', Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
}

.container {
  min-height: 260px;
  max-width: 520px;
  width: calc(100% - 40px);
  margin: 60px auto;
  padding: 20px;
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(6px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
  position: relative;
}

.container h1 {
  margin: 0 0 14px 0;
  font-size: 20px;
  font-weight: 700;
}

.form {
  display: flex;
  gap: 12px;
  align-items: center;
}


input#taskInput {
  flex: 1;
  padding: 10px 12px;
  border: 2px solid #e6e6e6;
  border-radius: 8px;
  font-size: 15px;
  outline: none;
  transition: border-color .15s;
}


input#taskInput:focus {
  border-color: #7bb26b;
}

button#addBtn {
  padding: 10px 16px;
  background: linear-gradient(180deg, #52b788, #2f8a59);
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}

ul#taskList {
  list-style: none;
  padding: 0;
  margin: 18px 0 0 0;
}

li.task {
  padding: 12px 12px 12px 16px;
  margin-bottom: 10px;
  background: rgba(255,255,255,0.9);
  border-radius: 10px;
  position: relative;
  display: flex;
  align-items: center;
  gap: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.04);
}

li.task input[type="checkbox"] {
  width: 18px;
  height: 18px;
}


.task .text {
  flex: 1;
  font-size: 15px;
  word-break: break-word;
}

.task.completed .text {
  color: #9aa0a6;
  text-decoration: line-through;
}

.delete-btn {
  background: transparent;
  border: none;
  color: #e35b4e;
  font-weight: 600;
  cursor: pointer;
  padding: 6px 10px;
  border-radius: 6px;
}

@media (max-width: 420px) {
  .container { margin: 30px 12px; }
  button#addBtn { padding: 10px 12px; font-size: 14px; }
}
</style>
</head>
<body>

<div class="container">
  <h1>ToDo List</h1>

  <div class="form" role="form" aria-label="Add task form">
    <input id="taskInput" type="text" placeholder="Enter the task" aria-label="Task input">
    <button id="addBtn" type="button">Add</button>
  </div>

  <ul id="taskList" aria-live="polite"></ul>
</div>

<script>
const input = document.getElementById('taskInput');  
const addBtn = document.getElementById('addBtn');   
const taskList = document.getElementById('taskList'); 

function saveTasks(tasks) {
  localStorage.setItem('todo_tasks', JSON.stringify(tasks));
}

function loadTasks() {
  const raw = localStorage.getItem('todo_tasks');
  if (!raw) return [];
  try {
    return JSON.parse(raw);
  } catch (e) {
    console.error('Failed to parse tasks from storage', e);
    return [];
  }
}

function renderTasks(tasks) {
  taskList.innerHTML = ''; 
  tasks.forEach((t, index) => {
    const li = document.createElement('li');
    li.className = 'task' + (t.done ? ' completed' : '');
    li.dataset.index = index;

    const chk = document.createElement('input');
    chk.type = 'checkbox';
    chk.checked = !!t.done;
    chk.addEventListener('change', () => {
      t.done = chk.checked;
      saveTasks(tasks);
      renderTasks(tasks);
    });

    const span = document.createElement('div');
    span.className = 'text';
    span.textContent = t.text;

    const del = document.createElement('button');
    del.className = 'delete-btn';
    del.textContent = 'Delete';
    del.addEventListener('click', () => {
      tasks.splice(index, 1);
      saveTasks(tasks);
      renderTasks(tasks);
    });

    li.appendChild(chk);
    li.appendChild(span);
    li.appendChild(del);
    taskList.appendChild(li);
  });
}

let tasks = loadTasks();
renderTasks(tasks);

addBtn.addEventListener('click', () => {
  const text = input.value.trim();
  if (!text) return;          
  tasks.push({ text, done: false });
  saveTasks(tasks);
  renderTasks(tasks);
  input.value = '';
  input.focus();
});

input.addEventListener('keydown', (e) => {
  if (e.key === 'Enter') addBtn.click();
});
</script>
</body>
</html>

